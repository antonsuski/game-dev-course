language: cpp

compiler:
- gcc

sudo: required

before_install:
- sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
- sudo apt-get update -qq
- sudo -E add-apt-repository -y ppa:george-edison55/cmake-3.x
- sudo -E apt-get update

install:
- sudo apt-get install -qq g++-9
- sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-9 90
- sudo apt-get install cmake
- sudo apt install ninja-build
- sudo apt remove --purge --auto-remove cmake
- version=3.17
- build=0
- mkdir ~/temp
- cd ~/temp
- wget https://cmake.org/files/v$version/cmake-$version.$build.tar.gz
- tar -xzvf cmake-$version.$build.tar.gz
- cd cmake-$version.$build/

script:

#task 1 01_hello_static
- cd 01-hello
- 'if [ ! -d "./build" ];
 then mkdir build;
fi'
- cd build
- cmake .. -G "Ninja"
- ninja 01-hello-static
- ./bin/01-hello-static
  
#task 1 01_hello_dynamic
- cd ../../../01_hello/01_hello_dynamic
- 'if [ ! -d "./build" ];
 then mkdir build;
fi'
- cd build
- cmake ..
- make
- ./source/01_hello_dynamic
